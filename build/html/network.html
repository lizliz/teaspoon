

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.4.2. Network Representation of Time Series &mdash; teaspoon 1.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2.4.3. Information Module" href="information.html" />
    <link rel="prev" title="2.4.1. Time Series Analysis (TSA) Tools" href="tsa.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> teaspoon
          

          
            
            <img src="_static/teaspoon.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">1. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#requirements">1.1. Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installation">1.2. Installation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">2. Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="parameter_selection.html">2.1. Parameter Selection Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="MI.html">2.1.1. Mutual Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="AC.html">2.1.2. Auto-correlation</a></li>
<li class="toctree-l3"><a class="reference internal" href="FSA.html">2.1.3. Fourier Spectrum Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="PAMI.html">2.1.4. Permutation Auto Mutual Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="MsPE.html">2.1.5. Multi-scale Permutation Entropy</a></li>
<li class="toctree-l3"><a class="reference internal" href="FNN.html">2.1.6. False Nearest Neighbors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ML.html">2.2. Machine Learning (ML) Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="F_PD.html">2.2.1. Featurization</a></li>
<li class="toctree-l3"><a class="reference internal" href="CL.html">2.2.2. Classification</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML.html#references">2.2.3. References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="TDA.html">2.3. Topological Data Analaysis (TDA) Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="PHN.html">2.3.1. Persistent Homology of Networks (PHN) Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="distances.html">2.3.2. Distances</a></li>
<li class="toctree-l3"><a class="reference internal" href="drawing.html">2.3.3. Drawing</a></li>
<li class="toctree-l3"><a class="reference internal" href="persistence.html">2.3.4. Persistence</a></li>
<li class="toctree-l3"><a class="reference internal" href="sublevel_set_persistence.html">2.3.5. Zero Dimensional Sublevel Set Persistence (SLSP) Module</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="SP.html">2.4. Signal Processing (SP) Module</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="tsa.html">2.4.1. Time Series Analysis (TSA) Tools</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">2.4.2. Network Representation of Time Series</a></li>
<li class="toctree-l3"><a class="reference internal" href="information.html">2.4.3. Information Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc.html">2.4.4. Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="MakeData.html">2.5. Make Data (MakeData) Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="PointCloud.html">2.5.1. Point Cloud Data Generation (PointCloud) Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="DynSysLib.html">2.5.2. Dynamic Systems Library (DynSysLib) Module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">3. Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#contributing-to-documentation">3.1. Contributing to Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">4. License</a></li>
<li class="toctree-l1"><a class="reference internal" href="citing.html">5. Citing</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">teaspoon</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html"><span class="section-number">2. </span>Table of Contents</a> &raquo;</li>
        
          <li><a href="SP.html"><span class="section-number">2.4. </span>Signal Processing (SP) Module Documentation</a> &raquo;</li>
        
      <li><span class="section-number">2.4.2. </span>Network Representation of Time Series</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/network.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="network-representation-of-time-series">
<h1><span class="section-number">2.4.2. </span>Network Representation of Time Series<a class="headerlink" href="#network-representation-of-time-series" title="Permalink to this headline">¶</a></h1>
<p>This module provides algorithms for forming both ordinal partition networks (see example GIF below) and k-NN networks. The formation of the networks is described in detail in “<a class="reference external" href="https://arxiv.org/abs/1904.07403">Persistent Homology of Complex Networks for Dynamic State Detection</a>.”</p>
<a class="with-shadow float-left reference internal image-reference" href="_images/ordinal_partition_network_video_complex.gif"><img alt="Left floating image" class="with-shadow float-left" src="_images/ordinal_partition_network_video_complex.gif" style="width: 471.15000000000003px; height: 214.38000000000002px;" /></a>
<p>Figure: Example formation of an ordinal partition network for 6 dimensional permutations. As the ordinal ranking of the 6 spaced points changes, so does the node in the network. This shows how the network captures the periodic structure of the time series through a resulting double loop topology.</p>
<span class="target" id="module-teaspoon.SP.network"></span><dl class="py clear-both function">
<dt id="teaspoon.SP.network.cgss_graph">
<code class="sig-prename descclassname">teaspoon.SP.network.</code><code class="sig-name descname">cgss_graph</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ts</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">B</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">embedding_method</span><span class="o">=</span><span class="default_value">'standard'</span></em>, <em class="sig-param"><span class="n">binning_method</span><span class="o">=</span><span class="default_value">'equal_frequency'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/teaspoon/SP/network.html#cgss_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#teaspoon.SP.network.cgss_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>This function creates a coarse grained state space (cgss) network represented as an adjacency matrix A using a 1-D time series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ts</strong> (<em>1-D array</em>) – 1-D time series signal</p>
</dd>
<dt class="field-even">Other Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>n</strong> (<em>Optional[int]</em>) – embedding dimension for state space reconstruction. Default is uses false nearest negihbor algorithm from parameter_selection module.</p></li>
<li><p><strong>tau</strong> (<em>Optional[int]</em>) – embedding delay from state space reconstruction. Default uses mutual information algorithm from parameter_selection module.</p></li>
<li><p><strong>B</strong> (<em>Optional[int]</em>) – number of bins per dimension for graph formation. Default is 10.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A (2-D weighted and directed square adjacency matrix)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>[2-D square array]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="teaspoon.SP.network.knn_graph">
<code class="sig-prename descclassname">teaspoon.SP.network.</code><code class="sig-name descname">knn_graph</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ts</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">k</span><span class="o">=</span><span class="default_value">4</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/teaspoon/SP/network.html#knn_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#teaspoon.SP.network.knn_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>This function creates an k-NN network represented as an adjacency matrix A using a 1-D time series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ts</strong> (<em>1-D array</em>) – 1-D time series signal</p>
</dd>
<dt class="field-even">Other Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>n</strong> (<em>Optional[int]</em>) – embedding dimension for state space reconstruction. Default is uses FNN algorithm from parameter_selection module.</p></li>
<li><p><strong>tau</strong> (<em>Optional[int]</em>) – embedding delay fro state space reconstruction. Default uses MI algorithm from parameter_selection module.</p></li>
<li><p><strong>k</strong> (<em>Optional[int]</em>) – number of nearest neighbors for graph formation.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A (2-D weighted and directed square adjacency matrix)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>[2-D square array]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="teaspoon.SP.network.ordinal_partition_graph">
<code class="sig-prename descclassname">teaspoon.SP.network.</code><code class="sig-name descname">ordinal_partition_graph</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ts</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tau</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/teaspoon/SP/network.html#ordinal_partition_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#teaspoon.SP.network.ordinal_partition_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>This function creates an ordinal partition network represented as an adjacency matrix A using a 1-D time series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ts</strong> (<em>1-D array</em>) – 1-D time series signal</p>
</dd>
<dt class="field-even">Other Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>n</strong> (<em>Optional[int]</em>) – embedding dimension for state space reconstruction. Default is uses false nearest negihbor algorithm from parameter_selection module.</p></li>
<li><p><strong>tau</strong> (<em>Optional[int]</em>) – embedding delay from state space reconstruction. Default uses mutual information algorithm from parameter_selection module.</p></li>
<li><p><strong>k</strong> (<em>Optional[int]</em>) – number of nearest neighbors for graph formation.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A (2-D weighted and directed square adjacency matrix)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>[2-D square array]</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-teaspoon.SP.network_tools"></span><dl class="py function">
<dt id="teaspoon.SP.network_tools.make_network">
<code class="sig-prename descclassname">teaspoon.SP.network_tools.</code><code class="sig-name descname">make_network</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">A</span></em>, <em class="sig-param"><span class="n">position_iterations</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">remove_deg_zero_nodes</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/teaspoon/SP/network_tools.html#make_network"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#teaspoon.SP.network_tools.make_network" title="Permalink to this definition">¶</a></dt>
<dd><p>This function creates a networkx graph and position of the nodes using the adjacency matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>A</strong> (<em>2-D array</em>) – 2-D square adjacency matrix</p>
</dd>
<dt class="field-even">Other Parameters</dt>
<dd class="field-even"><p><strong>position_iterations</strong> (<em>Optional[int]</em>) – Number of spring layout position iterations. Default is 1000.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>G (networkx graph representation), pos (position of nodes for networkx drawing)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>[dictionaries, list]</p>
</dd>
</dl>
</dd></dl>

<p>The network output has the data structure of an adjacency matrix. An example is shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#import needed packages</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">teaspoon.SP.network</span> <span class="kn">import</span> <span class="n">knn_graph</span>
<span class="kn">from</span> <span class="nn">teaspoon.SP.network</span> <span class="kn">import</span> <span class="n">ordinal_partition_graph</span>
<span class="kn">from</span> <span class="nn">teaspoon.SP.network</span> <span class="kn">import</span> <span class="n">cgss_graph</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">200</span><span class="p">)</span> <span class="c1">#define time array</span>
<span class="n">ts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="c1">#generate a simple time series</span>

<span class="n">A_knn</span> <span class="o">=</span> <span class="n">knn_graph</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span> <span class="c1">#ordinal partition network from time series</span>

<span class="n">A_op</span> <span class="o">=</span> <span class="n">ordinal_partition_graph</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span> <span class="c1">#knn network from time series</span>

<span class="n">A_cgss</span> <span class="o">=</span> <span class="n">cgss_graph</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span> <span class="c1">#coarse grained state space netwrok from time series</span>
</pre></div>
</div>
<p>Additionally, there is methods to change the data structure to anything available in networkx through changing the adjacency matrix to the networkx data structure (dictionary of dictionaries) with an example as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">200</span><span class="p">)</span>
<span class="n">ts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="c1">#generate a simple time series</span>

<span class="kn">from</span> <span class="nn">teaspoon.SP.network</span> <span class="kn">import</span> <span class="n">knn_graph</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">knn_graph</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">teaspoon.SP.network_tools</span> <span class="kn">import</span> <span class="n">make_network</span>
<span class="n">G</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">make_network</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>


<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Network&#39;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">font_weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">font_size</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">node_size</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>This coe has the output as follows:</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="_images/example_knn_graph.png"><img alt="_images/example_knn_graph.png" src="_images/example_knn_graph.png" style="width: 460.0px; height: 467.0px;" /></a>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="information.html" class="btn btn-neutral float-right" title="2.4.3. Information Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tsa.html" class="btn btn-neutral float-left" title="2.4.1. Time Series Analysis (TSA) Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Munch

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXX-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>