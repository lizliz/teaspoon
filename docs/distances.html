

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>2.3.2. Distances &mdash; teaspoon 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2.3.3. Drawing" href="drawing.html" />
    <link rel="prev" title="2.3.1. Persistent Homology of Networks (PHN)" href="PHN.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="index.html" class="icon icon-home"> teaspoon
          

          
            
            <img src="_static/teaspoon.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">1. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#requirements">1.1. Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installation">1.2. Installation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">2. Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="parameter_selection.html">2.1. Parameter Selection Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="MI.html">2.1.1. Mutual Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="AC.html">2.1.2. Auto-correlation</a></li>
<li class="toctree-l3"><a class="reference internal" href="FSA.html">2.1.3. Fourier Spectrum Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="PAMI.html">2.1.4. Permutation Auto Mutual Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="MsPE.html">2.1.5. Multi-scale Permutation Entropy</a></li>
<li class="toctree-l3"><a class="reference internal" href="FNN.html">2.1.6. False Nearest Neighbors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ML.html">2.2. Machine Learning (ML) Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="F_PD.html">2.2.1. Featurization</a></li>
<li class="toctree-l3"><a class="reference internal" href="CL.html">2.2.2. Classification</a></li>
<li class="toctree-l3"><a class="reference internal" href="ML.html#references">2.2.3. References</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="TDA.html">2.3. Topological Data Analaysis (TDA) Module</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="PHN.html">2.3.1. Persistent Homology of Networks (PHN) Module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">2.3.2. Distances</a></li>
<li class="toctree-l3"><a class="reference internal" href="drawing.html">2.3.3. Drawing</a></li>
<li class="toctree-l3"><a class="reference internal" href="persistence.html">2.3.4. Persistence</a></li>
<li class="toctree-l3"><a class="reference internal" href="sublevel_set_persistence.html">2.3.5. Zero Dimensional Sublevel Set Persistence (SLSP) Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="buzz.html">2.3.6. Bifurcations using ZigZag (BuZZ)</a></li>
<li class="toctree-l3"><a class="reference internal" href="TopologicalConsistency.html">2.3.7. Topological Consistency via Kernel Estimation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SP.html">2.4. Signal Processing (SP) Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tsa.html">2.4.1. Time Series Analysis (TSA) Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="network.html">2.4.2. Network Representation of Time Series</a></li>
<li class="toctree-l3"><a class="reference internal" href="information.html">2.4.3. Information Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc.html">2.4.4. Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="MakeData.html">2.5. Make Data (MakeData) Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="PointCloud.html">2.5.1. Point Cloud Data Generation (PointCloud) Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="DynSysLib.html">2.5.2. Dynamic Systems Library (DynSysLib) Module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">3. Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#contributing-to-documentation">3.1. Contributing to Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">4. License</a></li>
<li class="toctree-l1"><a class="reference internal" href="citing.html">5. Citing</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">teaspoon</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html"><span class="section-number">2. </span>Table of Contents</a> &raquo;</li>
        
          <li><a href="TDA.html"><span class="section-number">2.3. </span>Topological Data Analysis (TDA) Module Documentation</a> &raquo;</li>
        
      <li><span class="section-number">2.3.2. </span>Distances</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/distances.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-teaspoon.TDA.Distance">
<span id="distances"></span><h1><span class="section-number">2.3.2. </span>Distances<a class="headerlink" href="#module-teaspoon.TDA.Distance" title="Permalink to this headline">¶</a></h1>
<p>This module provides algorithms to compute pairwise distances between persistence diagrams.</p>
<dl class="py function">
<dt class="sig sig-object py" id="teaspoon.TDA.Distance.dgmDist_Hera">
<span class="sig-prename descclassname"><span class="pre">teaspoon.TDA.Distance.</span></span><span class="sig-name descname"><span class="pre">dgmDist_Hera</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">D1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">D2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wassDeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Bottleneck'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relError</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">internal_p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/teaspoon/TDA/Distance.html#dgmDist_Hera"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#teaspoon.TDA.Distance.dgmDist_Hera" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Hera must be installed and in the bash path to use this function <a class="reference external" href="https://bitbucket.org/grey_narn/hera">https://bitbucket.org/grey_narn/hera</a></p>
</div>
<p>Hera input format:</p>
<blockquote>
<div><ul class="simple">
<li><p>bottleneck_dist file1 file2  [relative_error]</p></li>
<li><p>wasserstein_dist file1 file2  [wasserstein degree] [relative error] [internal norm]  where file1 and file2 represent the persistence diagrams.</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>D1</strong><strong>)</strong> (<em>ndarray</em>) – Persistence diagram –(Nx2) matrix.</p></li>
<li><p><strong>(</strong><strong>D2</strong><strong>)</strong> (<em>ndarray</em>) – Persistence diagram –(Nx2) matrix.</p></li>
<li><p><strong>wassDeg</strong> – <p>Options are:</p>
<ul>
<li><p>’Bottleneck’ or anything containing ‘bot’. Runs the bottleneck_dist command</p></li>
<li><p>np.inf: Also returns bottleneck distance with the bottleneck_dist command</p></li>
<li><p>an integer q: Computes the q-th Wasserstein distance</p></li>
</ul>
</p></li>
<li><p><strong>relError</strong> – <ul>
<li><p>An input to both bottleneck_dist and wasserstein_dist.</p></li>
<li><dl class="simple">
<dt>For wasserstein_dist from hera documentation:</dt><dd><p>If two diagrams are equal, then the exact distance 0.0 is printed (the order of points in file1 and file2 need not be the same).
Otherwise the output is an approximation of the exact distance. Precisely:
if <span class="math notranslate nohighlight">\(d_{exact}\)</span> is the true distance and d_approx is the output, then
<span class="math notranslate nohighlight">\(\frac{| d_{exact} - d_{approx} |}{ d_{exact} } &lt; \mathrm{relativeError}\)</span>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>For bottleneck_dist from hera documentation:</dt><dd><p>If two diagrams are equal, then the exact distance 0.0 is printed (the order of points in file1 and file2 need not be the same).
Otherwise the output is an approximation of the exact distance.
Precisely: if <span class="math notranslate nohighlight">\(d_{exact}\)</span> is the true distance and d_approx is the output, then
<span class="math notranslate nohighlight">\(\frac{| d_{exact} - d_{approx} |}{ d_{exact} } &lt; \mathrm{relativeError}.\)</span></p>
</dd>
</dl>
</li>
<li><p>Default value in Hera is 0.01 for Wasserstein distance and 0 (exact computation) for bottleneck distance.</p></li>
<li><p>Values passed to hera must be positive.</p></li>
</ul>
</p></li>
<li><p><strong>internal_p</strong> – This is only controllable for Wasserstein distance computation.  Matched points are measured by <span class="math notranslate nohighlight">\(L_p\)</span> distance.
Default is internal_p = infinity.</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A float for the distance between the diagrams</p>
</dd>
</dl>
</dd></dl>

<div class="section" id="example">
<h2><span class="section-number">2.3.2.1. </span>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>The following example computes the distance between two persistence diagrams:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ripser</span> <span class="kn">import</span> <span class="n">ripser</span>
<span class="kn">from</span> <span class="nn">teaspoon.MakeData.PointCloud</span> <span class="kn">import</span> <span class="n">Torus</span><span class="p">,</span> <span class="n">Annulus</span><span class="p">,</span> <span class="n">Cube</span><span class="p">,</span> <span class="n">Clusters</span><span class="p">,</span> <span class="n">Sphere</span>
<span class="kn">from</span> <span class="nn">teaspoon.TDA.Distance</span> <span class="kn">import</span> <span class="n">dgmDist_Hera</span>
<span class="n">numPts</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">seed</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Generate Torus</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Torus</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="n">numPts</span><span class="p">,</span><span class="n">seed</span> <span class="o">=</span> <span class="n">seed</span><span class="p">)</span>

<span class="c1"># Generate Annulus</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Annulus</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="n">numPts</span><span class="p">,</span><span class="n">seed</span> <span class="o">=</span> <span class="n">seed</span><span class="p">)</span>

<span class="c1"># Compute persistence diagrams</span>
<span class="n">PD1</span> <span class="o">=</span> <span class="n">ripser</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="mi">2</span><span class="p">)[</span><span class="s1">&#39;dgms&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="n">PD2</span> <span class="o">=</span> <span class="n">ripser</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">1</span><span class="p">)[</span><span class="s1">&#39;dgms&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># Distance between diagrams</span>
<span class="n">dgmDist_Hera</span><span class="p">(</span><span class="n">PD1</span><span class="p">,</span><span class="n">PD2</span><span class="p">,</span><span class="n">wassDeg</span><span class="o">=</span><span class="s1">&#39;Bottleneck&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output for this example is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">0.6366935</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="drawing.html" class="btn btn-neutral float-right" title="2.3.3. Drawing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="PHN.html" class="btn btn-neutral float-left" title="2.3.1. Persistent Homology of Networks (PHN)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Munch.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXX-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>